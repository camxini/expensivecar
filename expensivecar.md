# Phase 1 SRTP部分

Time: 2024.4-2025.5

## 1. 硬件配置

### 1.1 用到的硬件

- 树莓派Raspberry Pi 4B 4GB
- 思岚激光雷达RPLIDAR A1
- L298N电机驱动模块
- MC520编码器电机
- 一个12V串联电池盒
- 面包板
- 两轮+万向轮的底盘
- 21英寸显示屏

### 1.2 没用到的硬件

- TB6612 FNG电机驱动板模块
- Arduino UNO板
- HC-SR04超声波测距模块
- LM2596S稳压模块
- N20减速马达
- 7寸显示屏
- 角码
- 电烙铁
- AB胶

## 2. 硬件组装过程

### 2.1 树莓派RPIO接口说明

[树莓派接口](https://shumeipai.nxez.com/raspberry-pi-pins-version-40)

上面的文章介绍了树莓派的GPIO引脚对照表，调用引脚的时候用python的RPi.GPIO库，设置模式为BCM，然后调用物理引脚对应的BCM编码。

e.g. 如果要调用物理引脚16，需要：

```python
import RPi.GPIO as GPIO
GPIO.setmode(GPIO.BCM)
example = 23 # 23是物理引脚16对应的BCM编码
```

这是一种简单的定义一个引脚example的方式，它的物理引脚号是16，BCM引脚号是23.

当然，标准的定义引脚方式是这样的：

```python
GPIO.setup(21, GPIO.INPUT)
GPIO.setup(23, GPIO.OUTPUT)
``` 
就把引脚作为GPIO输入或者输出了。

**关于GPIO引脚是否支持中断：** 所有的有BCM编号的GPIO引脚都支持中断，这和Arduino有很大区别。

### 2.2 关于编码器电机

编码器电机和普通的电机不太一样，可以简单理解为普通电机给电压或者PWM信号就可以转，编码器电机给了电压或者PWM信号转了以后，会返回值给控制器。也就是说，普通电机是开环控制的，编码器电机可以实现闭环控制。

利用编码器电机的闭环控制特点就可以实现PID转速调节。

#### 2.2.1 编码器电机接线说明

如果我没记错的话，我的电机是这样接的（不同编码器电机不太一样，可以参考电机的技术文档）：

```txt
1 -- 电机电源线-    接12V电池组的负极
2 -- 编码器电源VCC  接树莓派GPIO的5V
3 -- 编码器信号A相  
4 -- 编码器信号B相  
5 -- 编码器地线GND  接树莓派GPIO的GND
6 -- 电机电源线+    接12V电池组的正极
```

A相是输出正交脉冲信号的，B相和A相相位差差了90$\deg$，差的相位可以判断旋转方向。

总之，就把A相和B相理解成电机反馈给控制器的信号就行。

